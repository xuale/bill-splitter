(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{181:function(e,t,a){e.exports=a(361)},272:function(e,t){},274:function(e,t){},307:function(e,t){},308:function(e,t){},354:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},355:function(e,t,a){},359:function(e,t,a){},361:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),c=a.n(i),s=a(17),o=a(18),l=a(25),u=a(23),d=a(26),m=a(12),p=a(370),f=a(365),h=a(371),g=a(369),y=a(362),v=a(363),b=a(76),E=a(27),O=a.n(E),j=a(38),k=a(34),w=a(366),C=a(368),N=a(79),x=a.n(N);x.a.initializeApp({apiKey:"AIzaSyDZjFuL-G_kTkrQR8qFt0UyxaSIO9Wb0oI",authDomain:"splitio-6c3eb.firebaseapp.com",databaseURL:"https://splitio-6c3eb.firebaseio.com",projectId:"splitio-6c3eb",storageBucket:"splitio-6c3eb.appspot.com",messagingSenderId:"924837398418"});var I=x.a.firestore();I.settings({timestampsInSnapshots:!0});var F=x.a.database.ServerValue.TIMESTAMP,S=function(){function e(t){Object(s.a)(this,e),this.db=I,this.ref=this.db.collection(t)}return Object(o.a)(e,[{key:"create",value:function(e){var t=this;return e.createdAt=F,new Promise(function(a,n){t.ref.add(e).then(function(e){a(e.id)}).catch(function(e){n(e)})})}},{key:"getById",value:function(e){var t=this;return new Promise(function(a,n){t.ref.doc(e).get().then(function(e){a(e)}).catch(function(e){n(e)})})}},{key:"read",value:function(){var e=this;return new Promise(function(t,a){e.ref.get().then(function(e){t(e)}).catch(function(e){a(e)})})}},{key:"query",value:function(e){var t=this,a=e.field,n=e.operator,r=e.value;return new Promise(function(e,i){t.ref.where(a,n,r).get().then(function(t){e(t)}).catch(function(e){i(e)})})}},{key:"compoundQuery",value:function(e,t){var a=this,n=e.firstField,r=e.firstOperator,i=e.firstValue,c=t.secondField,s=t.secondOperator,o=t.secondValue;return new Promise(function(e,t){a.ref.where(n,r,i).where(c,s,o).get().then(function(t){return e(t)}).catch(function(e){t(e)})})}},{key:"update",value:function(e,t){var a=this.ref.doc(e);return new Promise(function(e,n){a.update(t).then(function(t){e(t)}).catch(function(e){n(e)})})}},{key:"delete",value:function(e){var t=this;return new Promise(function(a,n){t.ref.doc(e).delete().then(function(e){a(e)}).catch(function(e){n(e)})})}}]),e}(),P=new(function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"users";return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"register",value:function(e){var t=this,a=e.firstName,n=e.lastName,r={email:e.email,firstName:a,lastName:n,password:e.password,isLoggedIn:!0};return new Promise(function(e,a){t.create(r).then(function(t){var a=r;a.id=t,e(a)}).catch(function(e){a(e)})})}},{key:"login",value:function(e){var t=this;return new Promise(function(a,n){var r={firstField:"email",firstOperator:"==",firstValue:e.email},i={secondField:"password",secondOperator:"==",secondValue:e.password};t.compoundQuery(r,i).then(function(r){if(1!==r.docs.length)return n({error:"no value user"});var i=r.docs[0].id;t.update(i,{isLoggedIn:!0}).then(function(t){var n=e;return n.id=i,a(n)}).catch(function(e){return n(e)})}).catch(function(e){return a(e)})})}},{key:"logout",value:function(e){return this.update(e,{isLoggedIn:!1})}}]),t}(S)),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",firstName:"",lastName:"",isNewAccount:!1},a.switchLoginRegister=a.switchLoginRegister.bind(Object(m.a)(Object(m.a)(a))),a.register=a.register.bind(Object(m.a)(Object(m.a)(a))),a.login=a.login.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"switchLoginRegister",value:function(){var e=this.state.isNewAccount;this.setState({isNewAccount:!e})}},{key:"register",value:function(){var e=Object(j.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.register(this.state);case 2:return e.next=4,this.login();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(j.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.login(this.state);case 2:t=e.sent,this.saveLoginLocally(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"saveLoginLocally",value:function(e){var t=e.id,a=e.firstName,n=e.lastName;localStorage.setItem("isLoggedIn","true"),localStorage.setItem("id",t),localStorage.setItem("firstName",a),localStorage.setItem("lastName",n),this.enterCreate()}},{key:"enterCreate",value:function(){console.log("redirecting"),this.props.history.push("/create")}},{key:"render",value:function(){var e=this.state.isNewAccount;return r.a.createElement(y.a,{style:{marginTop:"4rem"}},r.a.createElement(v.a,{span:8,offset:8},e&&r.a.createElement(w.a,{title:"Register"},r.a.createElement(C.a,{placeholder:"First Name",onInput:Object(k.a)(this,"firstName"),style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"Last Name",onInput:Object(k.a)(this,"lastName"),style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"Email",onInput:Object(k.a)(this,"email"),style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"Password",type:"password",onInput:Object(k.a)(this,"password"),style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"Confirm Password",type:"password",style:{margin:"8px"}}),r.a.createElement(b.a,{type:"primary",onClick:this.register,style:{margin:"8px"}},"Create Account"),r.a.createElement("p",{style:{margin:"8px"}},"Already have an account?"," ",r.a.createElement("a",{onClick:this.switchLoginRegister},"Click here to login. "))),!e&&r.a.createElement(w.a,{title:"Login"},r.a.createElement(C.a,{placeholder:"Email",onInput:Object(k.a)(this,"email"),style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"Password",type:"password",onInput:Object(k.a)(this,"password"),style:{margin:"8px"}}),r.a.createElement(b.a,{type:"primary",onClick:this.login,style:{margin:"8px"}},"Login"),r.a.createElement("p",{style:{margin:"8px"}},"Don't have an account?"," ",r.a.createElement("a",{onClick:this.switchLoginRegister},"Click here to register.")))))}}]),t}(n.Component),L=a(367),M=a(21),T=new(function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"payments";return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"add",value:function(e){return this.create(e)}},{key:"getAll",value:function(e){var t=this;return new Promise(function(a,n){var r={field:"id",operator:"==",value:e};t.query(r).then(function(e){var t=[];e.forEach(function(e){t.push(e.data())}),a(t)}).catch(function(e){n(e)})})}},{key:"remove",value:function(e){return this.delete(e)}}]),t}(S)),R=new(function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"friends";return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"add",value:function(e,t){var a=this;return new Promise(function(n,r){var i={field:"email",operator:"==",value:t};P.query(i).then(function(t){if(t.empty)return r("user does not exist");var i=[];t.forEach(function(e){var t=e.data();t.id=e.id,i.push(t)});var c=i[0].id;a.create({userId:e,friendId:c}).then(function(e){n(e)}).catch(function(e){r(e)})}).catch(function(e){r(e)})})}},{key:"getById",value:function(e){return this.getById(e)}},{key:"getAll",value:function(e){var t=this,a={field:"userId",operator:"==",value:e};return new Promise(function(e,n){Promise.all([P.read(),t.query(a)]).then(function(t){var a=t[0],n=t[1],r=[];a.forEach(function(e){var t=e.data();t.id=e.id,r.push(t)});var i=[];n.forEach(function(e){var t=e.data();t.id=e.id,i.push(t)});var c=[];r.forEach(function(e){var t=i.find(function(t){return t.friendId===e.id});e&&t&&c.push(e)}),e(c)}).catch(function(e){return n(e)})})}},{key:"delete",value:function(e){return this.delete(e)}}]),t}(S)),D=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n=localStorage.getItem("id");return console.log(n),a.state={addCard:!1,addFriend:!1,currCard:0,cards:[],friends:[],selectedFriends:[0,0,0,0],id:n,cardNumber:"",friendID:""},a.enterPayScreen=a.enterPayScreen.bind(Object(m.a)(Object(m.a)(a))),a.toggleCardModal=a.toggleCardModal.bind(Object(m.a)(Object(m.a)(a))),a.toggleFriendModal=a.toggleFriendModal.bind(Object(m.a)(Object(m.a)(a))),a.truncateNumber=a.truncateNumber.bind(Object(m.a)(Object(m.a)(a))),a.postCardNumber=a.postCardNumber.bind(Object(m.a)(Object(m.a)(a))),a.addFriend=a.addFriend.bind(Object(m.a)(Object(m.a)(a))),a.getCards=a.getCards.bind(Object(m.a)(Object(m.a)(a))),a.getFriends=a.getFriends.bind(Object(m.a)(Object(m.a)(a))),a.selectCard=a.selectCard.bind(Object(m.a)(Object(m.a)(a))),a.selectFriend=a.selectFriend.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getCards(),this.getFriends()}},{key:"getCards",value:function(){var e=Object(j.a)(O.a.mark(function e(){var t,a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.id,e.next=3,T.getAll(t);case 3:a=e.sent,this.setState({cards:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getFriends",value:function(){var e=Object(j.a)(O.a.mark(function e(){var t,a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.id,e.next=3,R.getAll(t);case 3:a=e.sent,n=[],a.forEach(function(){n.push(!1)}),this.setState({friends:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"enterPayScreen",value:function(){var e=Object(j.a)(O.a.mark(function e(){var t,a,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,a=t.selectedFriends,n=t.friends,r=[],a.forEach(function(e,t){e&&r.push(n[t])}),this.props.history.push("/pay",{friends:r});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"postCardNumber",value:function(){var e=Object(j.a)(O.a.mark(function e(){var t,a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.cardNumber,n=t.id,e.next=3,T.add({cardNumber:a,id:n});case 3:this.getCards();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFriend",value:function(){var e=Object(j.a)(O.a.mark(function e(){var t,a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.id,n=t.friendID,e.next=3,R.add(a,n);case 3:this.getFriends();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleCardModal",value:function(){var e=this.state.addCard;this.setState({addCard:!e})}},{key:"toggleFriendModal",value:function(){var e=this.state.addFriend;this.setState({addFriend:!e})}},{key:"selectCard",value:function(e){this.setState({currCard:4*e})}},{key:"selectFriend",value:function(e){var t=this.state.selectedFriends,a=t;a[e]=!t[e],this.setState({selectedFriends:a})}},{key:"truncateNumber",value:function(e){return e.toString().slice(12,17)}},{key:"render",value:function(){var e=this.state,t=e.friends,a=e.cards,n=e.selectedFriends,i=e.addCard,c=e.addFriend,s=e.currCard,o=this.truncateNumber,l=this.selectCard,u=this.selectFriend;return r.a.createElement("div",null,r.a.createElement(L.a,{title:"Enter card information",visible:i,okText:"Add card",onOk:this.postCardNumber,onCancel:this.toggleCardModal},r.a.createElement(C.a,{placeholder:"Card number",onInput:Object(k.a)(this,"cardNumber"),style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"Expiration date (MM/YY)",style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"Name on card",style:{margin:"8px"}}),r.a.createElement(C.a,{placeholder:"CVC",type:"password",style:{margin:"8px"}})),r.a.createElement(L.a,{title:"Search for a friend",visible:c,okText:"Add friend",onOk:this.addFriend,onCancel:this.toggleFriendModal},r.a.createElement(C.a,{placeholder:"Friend email",onInput:Object(k.a)(this,"friendID"),style:{margin:"8px"}})),r.a.createElement(y.a,{style:{marginTop:"4rem"}},r.a.createElement(v.a,{span:10,offset:7},r.a.createElement(w.a,{title:"Create transaction"},r.a.createElement(w.a,{type:"inner",title:"Change Payment?"},r.a.createElement(y.a,null,a.map(function(e,t){if(t<5)return r.a.createElement(v.a,{span:4,key:t},r.a.createElement("a",{onClick:function(){return l(t)}},r.a.createElement(M.a,{type:"credit-card",style:{fontSize:"32px",display:"block"}}),o(e.cardNumber)))}),r.a.createElement(v.a,{span:4},r.a.createElement("a",{onClick:this.toggleCardModal},r.a.createElement(M.a,{type:"plus"})))),r.a.createElement(y.a,null,r.a.createElement(v.a,{span:4,offset:s},r.a.createElement(M.a,{type:"caret-up"})))),r.a.createElement(w.a,{style:{marginTop:16},type:"inner",title:"Choose Friends"},r.a.createElement(y.a,null,t.map(function(e,t){var a={fontSize:"32px",display:"block"};if(n[t]&&(a.color="lightgreen"),t<5)return r.a.createElement(v.a,{span:4},r.a.createElement("a",{onClick:function(){return u(t)}},r.a.createElement(M.a,{type:"user",style:a}),e.firstName," ",e.lastName))}),r.a.createElement(v.a,{span:4},r.a.createElement("a",{onClick:this.toggleFriendModal},r.a.createElement(M.a,{type:"plus"}))))),r.a.createElement(b.a,{type:"primary",style:{marginTop:16},onClick:this.enterPayScreen},"Start Transaction")))))}}]),t}(n.Component),V=(n.Component,a(267),function(e){function t(e){var a;Object(s.a)(this,t);var n=(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.location.state.friends;return a.state={friends:n,total:[],firstName:"Anshul",lastName:"Aggarwal",isCompleted:!1},a.clickForPayment=a.clickForPayment.bind(Object(m.a)(Object(m.a)(a))),a.getName=a.getName.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("firstName"),t=localStorage.getItem("lastName");this.setState({firstName:e,lastName:t})}},{key:"clickForPayment",value:function(){var e=this.state.isCompleted;this.setState({isCompleted:!e})}},{key:"getName",value:function(){return this.state.firstName+" "+this.state.lastName}},{key:"render",value:function(){var e=this,t=this.state,a=t.friends,n=(t.total,t.firstName,t.lastName,t.isCompleted);return r.a.createElement(y.a,{style:{marginTop:"4rem"}},r.a.createElement(v.a,{span:8,offset:8},n&&r.a.createElement(w.a,null,r.a.createElement("p",null,"Success"),r.a.createElement("p",null,r.a.createElement(b.a,{type:"primary",onClick:this.clickForPayment,style:{margin:"8px"}},"Send Payments"))),!n&&r.a.createElement(w.a,{title:"Pay"},r.a.createElement("p",{style:{margin:"12px",textAlign:"left"}},"Receipt: ",this.getName()),r.a.createElement(v.a,null,a.map(function(e,t){var a=e.id;return r.a.createElement(y.a,null,r.a.createElement(v.a,{span:12},a)," ",r.a.createElement(v.a,{span:12},r.a.createElement(C.a,{placeholder:"Enter Value To Pay",style:{margin:"12px",display:"inline"}})))})),r.a.createElement(y.a,null,r.a.createElement(v.a,{span:4,offset:4},r.a.createElement(b.a,{type:"primary",onClick:this.clickForPayment,style:{margin:"8px"}},"Send Payments")),r.a.createElement(v.a,{span:8,offset:4},r.a.createElement(b.a,{onClick:function(){e.props.history.push("/create")},style:{margin:"8px"}},"Cancel"))))))}}]),t}(n.Component)),B=(a(354),a(355),g.a.Header),q=g.a.Content,z=g.a.Footer,Q=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n="true"==localStorage.getItem("isLoggedIn");return a.state={loggedIn:n},a.logout=a.logout.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"logout",value:function(){var e=localStorage.getItem("id");P.logout(e),localStorage.clear();var t="true"==localStorage.getItem("isLoggedIn");this.setState({loggedIn:t})}},{key:"render",value:function(){var e=this.state.loggedIn;return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(g.a,{className:"layout"},r.a.createElement(B,null,r.a.createElement(y.a,null,r.a.createElement(v.a,{span:8,offset:8},r.a.createElement("h1",{className:"App-logo"},r.a.createElement(f.a,{to:"/"},"Split.io"))),r.a.createElement(v.a,{span:4,offset:4},e&&r.a.createElement(b.a,{type:"danger",onClick:this.logout},"Logout")))),r.a.createElement(q,{style:{padding:"20px 50px",height:"85vh"}},r.a.createElement(h.a,{path:"/",exact:!0,component:A}),r.a.createElement(h.a,{path:"/create/",component:D}),r.a.createElement(h.a,{path:"/pay/",component:V})),r.a.createElement(z,{style:{textAlign:"center"}},"Made with \ud83d\udc9cat UCLA"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(359);c.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[181,2,1]]]);
//# sourceMappingURL=main.76d72c76.chunk.js.map